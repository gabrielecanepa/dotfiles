#!/bin/bash

# Core
if type -a gls >/dev/null; then
  alias ls="gls -h --color --group-directories-first -I .DS_Store -I 'Icon'$'\r'"
else
  alias ls="ls -h -G -p"
fi
alias ll="ls -la"
alias lss="du -sh * 2>/dev/null | sort -hr" # sort by size
alias omzr="omz reload"

# Paths
wd="$WORKING_DIR"
tmp="$wd/tmp"
cloud="/Users/$USER/Library/Mobile Documents/com~apple~CloudDocs"

# Directories
alias cdw="cd $wd"
alias tmp="cd $tmp"
alias cdcloud="cd $cloud"

# Files
alias aliases="$EDITOR $HOME/.aliases"
alias sshrc="$EDITOR $HOME/.ssh"
alias zshrc="$EDITOR $HOME/.zshrc"

# Functions
alias hide="chflags hidden"
alias unhide="chflags nohidden"

# Network
alias ip="echo $(curl -s ipinfo.io/ip)"
alias ips="ifconfig -a | perl -nle'/(\d+\.\d+\.\d+\.\d+)/ && print $1'"
alias serve="ruby -run -e httpd . -p 8000"

# Apps
alias te="open -a TextEdit"

# Git short aliases: gcm -> git cm -> git commit -m
for git_alias in $(git aliases | sed 's/\ .*//'); do
  if ! type -a "g$git_alias" >/dev/null; then
    alias g"""${git_alias}"="git $git_alias"
  fi
done
unset git_alias

# VSCode workspaces: code-<project> -> code /path/to/project.code-workspace
for workspace in $(find $wd -type f -name "*.code-workspace" -maxdepth 4); do
  workspace_name="$workspace:t:r"
  alias code-"""$workspace_name"="code $workspace"
done
unset workspace workspace_name
